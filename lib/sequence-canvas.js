var SequenceCanvas;(()=>{"use strict";var i={d:(t,s)=>{for(var e in s)i.o(s,e)&&!i.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})},o:(i,t)=>Object.prototype.hasOwnProperty.call(i,t)},t={};(()=>{i.d(t,{default:()=>f});var s,e,a,h,n,o,d,r,m,g,v,l,I,c,u=function(i,t,s,e){if("a"===s&&!e)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?i!==t||!e:!t.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?e:"a"===s?e.call(i):e?e.value:t.get(i)},w=function(i,t,s,e,a){if("m"===e)throw new TypeError("Private method is not writable");if("a"===e&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?i!==t||!a:!t.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===e?a.call(i,s):a?a.value=s:t.set(i,s),s};e=new WeakMap,a=new WeakMap,h=new WeakMap,n=new WeakMap,o=new WeakMap,d=new WeakMap,r=new WeakMap,m=new WeakMap,I=new WeakMap,s=new WeakSet,g=function(i){this.images[i].state="LOADING",this.canvas.dispatchEvent(u(this,m,"f").load);const t=new Image;t.src=this.images[i].path,t.onload=()=>{this.images[i].state="LOADED",this.images[i].image=t,this.canvas.dispatchEvent(u(this,m,"f").loaded),!u(this,e,"f")&&(this.startImmediately||this.startAfterLoaded&&this.isLoadedFrames())&&(this.currentIndex===this.startIndex?this.start():this.play())},t.onerror=()=>{this.images[i].state="ERROR"}},v=function(i){w(this,e,i,"f")},l=function(){u(this,s,"m",v).call(this,!0),this.drawImage(this.currentIndex),w(this,h,1e3/this.fps,"f"),w(this,o,Date.now(),"f"),w(this,d,u(this,o,"f"),"f"),u(this,I,"f").call(this)},c=function(){this.direction>0?this.loop?this.currentIndex===this.finishIndex?this.setCurrentImage(this.startIndex):this.setCurrentImage(this.currentIndex+1):this.currentIndex===this.finishIndex?u(this,s,"m",v).call(this,!1):this.setCurrentImage(this.currentIndex+1):this.loop?this.currentIndex===this.startIndex?this.setCurrentImage(this.finishIndex):this.setCurrentImage(this.currentIndex-1):this.currentIndex===this.startIndex?u(this,s,"m",v).call(this,!1):this.setCurrentImage(this.currentIndex-1),this.drawImage(this.currentIndex)};const f=class{constructor(i){var t,g,v,l,f,p,x,y,b,C,E,T,P,L,A,W,k,z,S,D,M,O,R,F,j,q,G,N,B,H,J,K,Q,U,V,X,Y,Z,$;s.add(this),this.canvas=void 0,this.context=void 0,this.heightCanvas=void 0,this.widthCanvas=void 0,this.images=void 0,this.isPositionImages=void 0,this.xPosImages=void 0,this.yPosImages=void 0,this.isSizeImages=void 0,this.widthImages=void 0,this.heightImages=void 0,this.isTrimImages=void 0,this.xTrimImages=void 0,this.yTrimImages=void 0,this.widthTrimImages=void 0,this.heightTrimImages=void 0,this.fps=void 0,this.direction=void 0,this.loop=void 0,this.startIndex=void 0,this.finishIndex=void 0,this.currentIndex=void 0,this.startImmediately=void 0,this.startAfterLoaded=void 0,this.initiate=!1,this.logging=!1,e.set(this,!1),a.set(this,void 0),h.set(this,void 0),n.set(this,void 0),o.set(this,void 0),d.set(this,void 0),r.set(this,void 0),m.set(this,{init:new Event("init",{bubbles:!0}),load:new Event("load",{bubbles:!0}),loaded:new Event("loaded",{bubbles:!0}),render:new Event("render",{bubbles:!0}),start:new Event("start",{bubbles:!0}),play:new Event("play",{bubbles:!0}),stop:new Event("stop",{bubbles:!0}),pause:new Event("pause",{bubbles:!0})}),I.set(this,(()=>{u(this,e,"f")?(w(this,a,requestAnimationFrame(u(this,I,"f")),"f"),w(this,n,Date.now(),"f"),w(this,r,u(this,n,"f")-u(this,o,"f"),"f"),u(this,r,"f")>u(this,h,"f")&&(w(this,o,u(this,n,"f")-u(this,r,"f")%u(this,h,"f"),"f"),u(this,s,"m",c).call(this))):u(this,a,"f")&&cancelAnimationFrame(u(this,a,"f"))})),this.canvas=i.canvas.element,this.context=this.canvas.getContext("2d"),this.widthCanvas=i.canvas.width,this.heightCanvas=i.canvas.height,this.images=i.images.paths.map((i=>({path:i,state:"WAIT"}))),this.isPositionImages=void 0!==(null===(g=null===(t=i.images)||void 0===t?void 0:t.options)||void 0===g?void 0:g.position),this.xPosImages=null===(f=null===(l=null===(v=i.images)||void 0===v?void 0:v.options)||void 0===l?void 0:l.position)||void 0===f?void 0:f.x,this.yPosImages=null===(y=null===(x=null===(p=i.images)||void 0===p?void 0:p.options)||void 0===x?void 0:x.position)||void 0===y?void 0:y.y,this.isSizeImages=void 0!==(null===(C=null===(b=i.images)||void 0===b?void 0:b.options)||void 0===C?void 0:C.size),this.widthImages=null===(P=null===(T=null===(E=i.images)||void 0===E?void 0:E.options)||void 0===T?void 0:T.size)||void 0===P?void 0:P.width,this.heightImages=null===(W=null===(A=null===(L=i.images)||void 0===L?void 0:L.options)||void 0===A?void 0:A.size)||void 0===W?void 0:W.height,this.isTrimImages=void 0!==(null===(z=null===(k=i.images)||void 0===k?void 0:k.options)||void 0===z?void 0:z.trim),this.xTrimImages=null===(M=null===(D=null===(S=i.images)||void 0===S?void 0:S.options)||void 0===D?void 0:D.trim)||void 0===M?void 0:M.x,this.yTrimImages=null===(F=null===(R=null===(O=i.images)||void 0===O?void 0:O.options)||void 0===R?void 0:R.trim)||void 0===F?void 0:F.y,this.widthTrimImages=null===(G=null===(q=null===(j=i.images)||void 0===j?void 0:j.options)||void 0===q?void 0:q.trim)||void 0===G?void 0:G.width,this.heightTrimImages=null===(H=null===(B=null===(N=i.images)||void 0===N?void 0:N.options)||void 0===B?void 0:B.trim)||void 0===H?void 0:H.height,this.fps="number"==typeof i.fps&&60>=i.fps&&i.fps>0?i.fps:60,this.direction=null!==(J=i.direction)&&void 0!==J?J:1,this.loop=null===(K=i.loop)||void 0===K||K,this.startIndex=null!==(Q=i.startIndex)&&void 0!==Q?Q:0,this.finishIndex=null!==(U=i.finishIndex)&&void 0!==U?U:i.images.paths.length?i.images.paths.length-1:0,this.currentIndex=null!==(V=i.currentIndex)&&void 0!==V?V:0,this.startImmediately=null!==(X=i.startImmediately)&&void 0!==X&&X,this.startAfterLoaded=null===(Y=i.startAfterLoaded)||void 0===Y||Y,this.initiate=null===(Z=i.init)||void 0===Z||Z,this.logging=null!==($=i.logging)&&void 0!==$&&$,this.initiate&&this.init()}drawImage(i){if("LOADED"===this.images[i].state&&this.images[i].image){if(this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.logging&&console.log("rendered:",i,this.images[i]),this.canvas.dispatchEvent(u(this,m,"f").render),this.isTrimImages){if(this.isSizeImages&&this.isPositionImages)return void this.context.drawImage(this.images[i].image,this.xTrimImages,this.yTrimImages,this.widthTrimImages,this.heightTrimImages,this.xPosImages,this.yPosImages,this.widthImages,this.heightImages);if(this.isSizeImages)return void this.context.drawImage(this.images[i].image,this.xTrimImages,this.yTrimImages,this.widthTrimImages,this.heightTrimImages,0,0,this.widthImages,this.heightImages);this.isPositionImages?this.context.drawImage(this.images[i].image,this.xTrimImages,this.yTrimImages,this.widthCanvas,this.heightCanvas,this.xPosImages,this.yPosImages,this.widthImages,this.heightImages):this.context.drawImage(this.images[i].image,this.xTrimImages,this.yTrimImages,this.widthCanvas,this.heightCanvas,0,0,this.widthImages,this.heightImages)}if(this.isSizeImages)return this.isPositionImages?void this.context.drawImage(this.images[i].image,this.xPosImages,this.yPosImages,this.widthImages,this.heightImages):void this.context.drawImage(this.images[i].image,0,0,this.widthImages,this.heightImages);this.isPositionImages?this.context.drawImage(this.images[i].image,this.xPosImages,this.yPosImages):this.context.drawImage(this.images[i].image,0,0)}else this.logging&&console.log("not rendered",i,this.images[i])}init(){this.canvas.dispatchEvent(u(this,m,"f").init),this.setSizesCanvas({width:this.widthCanvas,height:this.heightCanvas}),this.images.forEach(((i,t)=>{u(this,s,"m",g).call(this,t)}))}isLoadedFrames(){return this.images.every((i=>"LOADED"===i.state))}isErrorLoadFrames(){return this.images.some((i=>"ERROR"===i.state))}start(){this.currentIndex=this.startIndex,this.canvas.dispatchEvent(u(this,m,"f").start),u(this,s,"m",l).call(this)}play(){this.canvas.dispatchEvent(u(this,m,"f").play),u(this,s,"m",l).call(this)}stop(){this.canvas.dispatchEvent(u(this,m,"f").stop),u(this,s,"m",v).call(this,!1),this.setCurrentImage(this.startIndex)}pause(){this.canvas.dispatchEvent(u(this,m,"f").pause),u(this,s,"m",v).call(this,!1)}setCurrentImage(i){this.currentIndex=i}setSizesCanvas(i){i.width?(this.canvas.width=i.width,this.widthCanvas=i.width):this.widthCanvas=this.canvas.width,i.height?(this.canvas.height=i.height,this.heightCanvas=i.height):this.heightCanvas=this.canvas.height}on(i,t){this.canvas.addEventListener(i,t.bind(this))}}})(),SequenceCanvas=t.default})();